{% extends "base_game.html" %}

{% block title %}Fun English Adventure{% endblock %}

{% block game %}
<div class="container game-container">
    <!-- Browser Support Alert -->
    <div id="browserSupportAlert" class="alert alert-warning alert-dismissible fade show d-none mb-4">
        <i class="fas fa-exclamation-triangle me-2"></i>
        <span id="browserSupportText"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <!-- Game Header -->
    <div class="game-header text-center mb-5">
        <h1 class="game-title display-4 fw-bold text-gradient">
            <i class="fas fa-comment-dots me-3"></i>Sentence Challenge
        </h1>
        <p class="game-subtitle text-muted">Repeat the sentences correctly!</p>
    </div>

    <!-- Game Card -->
    <div class="game-card card border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="card-body p-5">
            <!-- Timer & Progress -->
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div class="timer-display bg-primary bg-opacity-10 text-primary px-4 py-2 rounded-pill">
                    <i class="fas fa-clock me-2"></i>
                    <span id="timer" class="fw-bold">60</span> seconds left
                </div>
                <div class="progress-display">
                    <span id="progress" class="badge bg-primary rounded-pill px-3 py-2">1/10</span>
                </div>
            </div>

            <!-- Sentence Display -->
            <div class="sentence-display-container mb-5">
                <div class="speech-bubble bg-primary text-white p-4 rounded-4 position-relative mb-3">
                    <button class="btn btn-sm btn-light click-to-speak float-end">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <div id="currentSentence" class="text-center">
                        <div class="sentence-text h4 fw-bold mb-2">Press the mic to start!</div>
                        <div class="sentence-translation text-white-50"></div>
                    </div>
                </div>
                
                <!-- User Speech Feedback -->
                <div id="userSpeech" class="user-speech-feedback bg-light p-3 rounded-3 text-start mt-3 d-none">
                    <div class="d-flex align-items-center">
                        <div class="user-icon bg-info text-white rounded-circle me-3" style="width:40px;height:40px;line-height:40px;text-align:center">
                            <i class="fas fa-user"></i>
                        </div>
                        <div>
                            <div class="text-muted small">You said:</div>
                            <div class="user-text fw-bold"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Microphone Button -->
            <div class="mic-container text-center mt-2">
                <button id="micButton" class="mic-button btn btn-danger btn-lg rounded-circle p-4 position-relative">
                    <i class="fas fa-microphone fa-2x"></i>
                    <div class="pulse-ring"></div>
                </button>
                <div id="feedback" class="feedback-message mt-3 h5"></div>
            </div>
        </div>

        <!-- Score Display -->
        <div class="card-footer bg-primary bg-opacity-10 py-3">
            <div class="score-display text-center">
                <span class="score-label text-muted me-2">Score:</span>
                <span id="score" class="score-value fw-bold fs-3 text-primary">0</span>
                <span class="score-points ms-1">points</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}